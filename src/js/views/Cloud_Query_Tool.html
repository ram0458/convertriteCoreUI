<!--
 Copyright (c) 2014, 2023, Oracle and/or its affiliates.
 Licensed under The Universal Permissive License (UPL), Version 1.0
 as shown at https://oss.oracle.com/licenses/upl/
 -->
<div class="oj-hybrid-padding">
    <oj-messages messages="[[messagesDataProvider]]" display="notification"
        position="[[riteUTils.positions]]"></oj-messages>
    
        <span id="popupWrapper">
            <oj-popup id="popup1" style="width:300px;" 
            position.at.horizontal="center" position.at.vertical="bottom"
            position.my.horizontal="center" position.my.vertical="top">
                <span class="blink-rainbow">
                    <oj-text-area value="{{sqlQuery}}"  label-edge="inside" rows="8" label-hint="[[riteUTils.riteLbl.sqlQuery]]"  ></oj-text-area>
                </span>
            </oj-popup>
</span>
            <div id="srch">
                <oj-dialog id="srchDailog" dialog-title="" aria-describedby="desc">
                    <div slot="header" class="txtRight">
                        <span on-click="[[closeSrchDailog]]">
                            <i class="fa fa-times-circle-o" style="color:red;font-size:20px;"></i>
                        </span>
                    </div>
                    <div slot="body">
                        <oj-defer>
                            <div class="oj-flex">
                                <div class="oj-flex-item oj-md-5">
                                    <span class="mainPageTitle">
                                        <i class="fa fa-empire filter" aria-hidden="true"></i>Search Cloud Query Tool</span>
        
                                </div>
                                <!-- <div class="oj-flex-item oj-md-3">

</div> -->
                                <div class="oj-flex-item oj-md-7 txtRight" >
                                    <oj-button class="demo-button-blue"  style="margin-top:10px;" chroming="solid" on-oj-action="[[srchExtraction]]" >
                                        <i class="fa fa-external-link"></i> Search Extraction
                                    </oj-button>
                                    <oj-button class="demo-button-blue" style="margin-top:10px;" chroming="solid" on-oj-action="[[clearCloudQuery]]" >
                                        <i class="fa fa-eraser"></i> Clear
                                    </oj-button>

                                    <oj-input-text style="width:15vw;margin:3px;" on-raw-value-changed="[[srchvalueChanged]]"
                                        id="filter" value='{{srchfilter}}'>
                                        <div slot="start" class="oj-text-field-start-end-icon fa fa-search" role="img"></div>
                                    </oj-input-text>
                                </div>
                            </div>
                            <div class="oj-flex oj-sm-12">
                                <oj-table id="table" aria-label="src table" data="[[searchdataprovider]]" layout="fixed"
                                    on-selection-changed='{{selectionListener}}' selection-mode='{"row": "single"}' scroll-position="{{scrollPos}}"
                                    style="width:100%;height:320px;" scroll-policy="loadMoreOnScroll" columns='[    
                                    {"headerText": "S.No.", 
                              "field": "rowid",
                              "headerClassName": "oj-sm-only-hide",
                              "className": "oj-sm-only-hide",
                              "resizable": "enabled",
                              "id": "rowid"},

                              {"headerText": "Destination Type", 
                              "field": "destinationType",                              
                              "resizable": "enabled",
                              "id": "destinationType",
                              "template":"destinationType"},
                             


                              {"headerText": "Table Name", 
                              "field": "tableName",                              
                              "resizable": "enabled",
                              "id": "tableName",
                              "template":"tableName"},
                             
                             
                              {"headerText": "Sql Query", 
                              "field": "sqlQuery",                   
                              "resizable": "enabled",
                              "id": "sqlQuery",
                              "template":"sqlQuery"} 

                               ]' class="demo-table-container">
                            

                            </oj-table>
                            <div class="oj-flex oj-sm-12">
                                <div class="oj-flex-item oj-sm-4"></div>
                                <div class="oj-flex-item oj-sm-4 txtCenter">

                                <div><i class="fa fa-angle-down" style="color:black" aria-hidden="true"></i></div>
                                <div class="head31" on-click="[[loadMore]]">Load More</div>
                            </div>
                            <div class="oj-flex-item oj-sm-4"></div>
                            </div>
                            <!-- <div class="oj-flex">
                                <div class="oj-flex-item" style="text-align: center;margin-top:20px;margin-bottom:10px;">
                                    <span id="page">Page<span id="padding"><oj-bind-text value="[[pageNo]]"></oj-bind-text></span><span
                                            id="padding">of</span><oj-bind-text value="[[maxPageNo]]"></oj-bind-text></span>
                
                                    <div style="display:inline-flex; " id="pagination">
                                        <oj-bind-for-each data="[[totalPages]]">
                                            <template>
                                                <li class="pagination" :id="[['p'+ $current.data.page]]" on-Click="[[showPageNo]]">
                                                    <span> <oj-bind-text value="[[$current.data.page]]"></oj-bind-text></span>
                                                </li>
                
                                            </template>
                                        </oj-bind-for-each>
                                    </div>
                                </div>
                            </div>  -->
                            </div>
                        </oj-defer>
                    </div>
                </oj-dialog>
        
                <oj-dialog id="confirmDailog" dialog-title="" aria-describedby="desc">
                    <div slot="header" class="txtRight">
                        <span on-click="[[cancelDelete]]">
                            <i class="fa fa-times-circle-o" style="color:red;font-size:20px;"></i>
                        </span>
                    </div>
                    <div slot="body">
                        <div class="oj-sm-12">
                            <div>
                                <span class="pageTitle">
                                    <i class="fa fa-empire filter" aria-hidden="true"></i>Conformation</span>
                            </div>
                            <div style="padding:10px">
                                Are you sure you want to delete ?
                            </div>
                            <div class="txtRight">
                                <oj-button class="demo-button-blue" on-oj-action="[[okDeleteConformation]]" chroming="solid">
                                    Ok
                                </oj-button>
                                <oj-button class="demo-button-blue" on-oj-action="[[cancelDelete]]" chroming="solid">
                                    Cancel
                                </oj-button>
                            </div>
                        </div>
                    </div>
                </oj-dialog>
            </div>
    <div class="oj-flex">
        <div class="oj-flex-item oj-md-4">
            <span class="mainPageTitle">
                <i class="fa fa-empire filter" aria-hidden="true"></i> Cloud Query Tool</span>
        </div>
        <div class="oj-flex-item oj-md-4">

        </div>
        <div class="oj-flex-item oj-md-4 txtRight oj-sm-only-hide">
            <span class="brdcrmbs"> ConvertRite > Cloud Query Tool</span>
        </div>

    </div>
    <hr>
    <div class="oj-flex">
        <div class="oj-flex-item oj-sm-1"></div>
        <div class="oj-flex-item oj-sm-7">

        </div>
        <div class="oj-flex-item oj-md-3 oj-sm-4 txtRight">
            <oj-button class="demo-button-blue" on-oj-action="[[showSrchDailog]]" chroming="solid">
                <i class="fa fa-search"></i>
            </oj-button>

            <oj-button class="demo-button-blue" on-oj-action="[[resetDataSync]]" chroming="solid">
                <i class="fa fa-plus"></i>
            </oj-button>

        </div>

    </div>

    <div class="oj-flex">
        <div class="oj-flex-item oj-sm-1"></div>
        <div class="oj-flex-item oj-sm-10">
            <oj-validation-group id="tracker" valid="{{groupValid}}">
                <oj-form-layout max-columns="3" label-edge="top" direction="row">        
                    <oj-select-single label-hint="[[riteUTils.riteLbl.destinationType]]" data="[[destNamedata]]" disabled="[[tableDestTypeDisabled]]"
                        placeholder="[[riteUTils.riteLbl.destinationType]]" value="{{destinationType}}" on-value-changed="[[destnameValueChange]]"
                        required>
                    </oj-select-single>
                    <oj-bind-if test='[[destinationType()=="Table Sync"]]'>
                    <oj-input-text value="{{tableName}}" label-hint="[[riteUTils.riteLbl.tableName]]" disabled="[[tableDestTypeDisabled]]"
                        placeholder="[[riteUTils.riteLbl.tableName]]" required></oj-input-text>
                      </oj-bind-if>
                      <oj-bind-if test='[[destinationType()=="Table Sync"]]'>

                      <oj-input-number id="inputnumber-id1" step="0" value="{{batchSize}}"
                      on-keypress="[[eatNonNumbers]]" label-hint="[[riteUTils.riteLbl.batchSize]]"
                      required></oj-input-number>
                      </oj-bind-if>
                      <oj-bind-if test='[[destinationType()=="Table Sync"]]'>
                      <oj-checkboxset id="ismetaData" on-click='[[ismetaDatChecked]]'  label-edge="inside"  value="{{ismetaData}}" label-hint="" style="margin-top:27px;" >
                        <oj-option value="checked">MetaData & Sql Query</oj-option>
                    </oj-checkboxset>
                    </oj-bind-if>

                        <oj-bind-if test='[[destinationType()=="Table Sync" && isVisible()||destinationType()!=="Lookups" && (ismetaData()[0] == "checked"||ismetaData()[0] == "Y")]]'>
                        <oj-text-area  label-hint="MetaData" required value="{{metaData}}" rows="4"
                        length.max="2000" ></oj-text-area>
                        </oj-bind-if>
                        <oj-bind-if test='[[(destinationType()=="Table Sync" && isVisible()|| destinationType()!=="Table Sync")]]'>
                        <div  id="sqlPopup" style="margin-top:25px;text-align: center;color:#007acc;font-weight:500;font-size:13px;"
                        on-click="[[openSqlDailog]]">
                        <i class="fa fa-plus-circle" style="color:#007acc" aria-hidden="true"></i> Sql Query <img
                            src="css/images/favicon.ico" style="vertical-align: middle;">
                    </div>
                    </oj-bind-if>

    
                </oj-form-layout>
            </oj-validation-group>
        </div>
     
            
     <div class="oj-flex-item oj-sm-1"></div>
    </div>
    <div class="oj-flex btnmargin">
        <div class="oj-flex-item oj-md-4 oj-sm-4 "></div>

        <div class="oj-flex-item oj-md-4 oj-sm-4 txtCenter">
            <oj-bind-if test="[[btnLbl()=='Save']]">
                <oj-button class="demo-button-blue" on-oj-action="[[saveCloudQuery]]" chroming="solid">
                  <i class="fa fa-save"></i> Save
                </oj-button>
              </oj-bind-if>
              <oj-bind-if test="[[btnLbl()=='Update']]">
                <oj-button class="demo-button-blue" on-oj-action="[[saveCloudQuery]]" chroming="solid">
                  <i class="fa fa-save"></i> Update
                </oj-button>
              </oj-bind-if>
      
        </div>
        <div class="oj-flex-item oj-md-3 txtRight">
            <oj-button class="demo-button-blue" on-oj-action="[[refreshDataSync]]" chroming="solid">
                <i class="fa fa-refresh"></i>
            </oj-button>
        </div>
        <div class="oj-flex-item oj-sm-1"></div>
    </div>
    </div>    
    <div class="oj-flex">
        <div class="oj-flex-item  oj-md-1 oj-sm-1"></div>
        <div class="oj-flex-item oj-md-10 oj-sm-10">
            <div id="componentDemoContent" style="margin-top:10px;width: 1px; min-width: 100%;overflow: auto;text-align: center;">
                <oj-table id="configTable" aria-label="license Table"   data="[[dataprovider]]"
                style="width:100%;height: auto;max-height:150px;"  
                dnd='{"reorder": {"columns": "enabled"}}' scroll-policy="loadMoreOnScroll"
                scroll-policy-options='{"fetchSize": 20}' columns='[
                {"headerText": "S.No.", 
                "field": "rowid",
                "headerClassName": "oj-sm-only-hide",
                "className": "oj-sm-only-hide",
                "resizable": "enabled",
                "id": "rowid"},

                {"headerText": "Destination Type", 
                "field": "destinationType",                              
                "resizable": "enabled",
                "id": "destinationType",
                "template":"destinationType"},
                {"headerText": "Table Name", 
                "field": "tableName",                              
                "resizable": "enabled",
                "id": "tableName",
                "template":"tableName"},               
                {"headerText": "Sql Query", 
                "field": "sqlQuery",                   
                "resizable": "enabled",
                "id": "sqlQuery",
                "template":"sqlQuery"} ,
                {"headerText": "Status", 
                "field": "status",                   
                "resizable": "enabled",
                "id": "status",
                "template":"status"} ,



                {"headerText": "Action",
                "field": "id",
                "style":"padding-top: 0px; padding-bottom: 0px;",
                "headerClassName": "oj-helper-text-align-end",
                "className": "oj-helper-text-align-end",
                "template": "actionTemplate",
                "id": "id"}

                 ]' class="demo-table-container">
                 <template slot="actionTemplate" data-oj-as="cell">
                    <oj-bind-if test='[[cell.mode=="navigation"]]'>
                        <oj-button data-oj-clickthrough="disabled" class="oj-button-sm" display="icons"
                            chroming="borderless" on-oj-action="[[handleDelete]]">
                            <span slot="startIcon" class="oj-ux-ico-trash">

                            </span>
                            <oj-bind-text value="[[cell.data]]"></oj-bind-text>
                        </oj-button>
                    </oj-bind-if>



                </template>
                <template slot="sqlQuery" data-oj-as="cell">
                    <oj-button  id="sqlPopup1" data-oj-clickthrough="disabled" style="background-color:rgb(27 122 189);border-radius: 7px;" class="oj-button-sm" display="icons"
                        chroming="borderless" on-oj-action="[[viewSqlQuery]]" >
                        <span slot="startIcon" class="fa fa-eye" >

                        </span>
                    </oj-button>

                    <span id="popupWrapper">
                        <oj-popup id="popup2" style="width:500px;" 
                        position.at.horizontal="center" position.at.vertical="bottom"
                        position.my.horizontal="center" position.my.vertical="top">
                            <span class="blink-rainbow">
                                <!-- <span style="width:400px;"><oj-bind-text  value="{{sqlQuery}}" ></oj-bind-text></span> -->
                                <oj-text-area value="{{sqlQuery}}"  rows="8" ></oj-text-area>

                            </span>
                        </oj-popup>
            </span>
            
            </template>
                 </oj-table>
            </div>
        </div>
        <div class="oj-flex-item  oj-md-1 oj-sm-1"></div>
    </div>   
</div>